{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Y A C I N E\\\\Desktop\\\\Falcon ress\\\\src\\\\Components\\\\ConnectJWT.js\";\nimport React, { Component } from 'react';\nimport axios from \"axios\";\nimport { Redirect, Link } from 'react-router-dom';\nimport \"../App.css\";\nimport { Navbar } from 'reactstrap';\nimport jwt_decode from \"jwt-decode\";\nexport default class ConnectJWT extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        [e.target.name]: e.target.value\n      });\n    };\n\n    this.login = () => {\n      const _this$state = this.state,\n            username = _this$state.username,\n            password = _this$state.password;\n      axios.post(\"http://localhost:5000/login\", {\n        username,\n        password\n      }).then(res => {\n        console.log(res);\n        localStorage.setItem(\"token\", res.data.token);\n        this.setState({\n          toDashboard: true\n        });\n      }).catch(err => alert('user not found'));\n    };\n\n    this.state = {\n      username: \"\",\n      password: \"\",\n      toDashboard: false,\n      mode: \"non\"\n    };\n  }\n\n  //   currentuser = () =>{\n  //     if (localStorage.getItem(\"token\")) {\n  //       const token = localStorage.getItem(\"token\");\n  //       var decoded = jwt_decode(token);\n  //       console.log(decoded);\n  //      axios.get('http://localhost:5000/users'+decoded._id)\n  //     .then(res => console.log(res.data))\n  // .catch(err => console.log(err.response.data));\n  //   }}\n  // configtoken = () => {\n  //   if (localStorage.getItem(\"token\")) {\n  //    const token = localStorage.getItem(\"token\");\n  // axios.defaults.baseURL='http://localhost:5000/'\n  //   axios.interceptors.request.use(\n  //     config => {\n  //         if (token) {\n  //             config.headers['Authorization'] = 'Bearer ' + token;\n  //         }\n  //         // config.headers['Content-Type'] = 'application/json';\n  //         return config;\n  //     },\n  //     error => {\n  //         Promise.reject(error)\n  //     });\n  //   };\n  componentDidMount() {\n    let webApiUrl = 'http://localhost:5000/';\n    let tokenStr = localStorage.getItem(\"token\");\n    console.log(this.configtoken());\n    axios.get(webApiUrl, {\n      headers: axios.defaults.headers.common['Authorization'] = \"Bearer \".concat(access_token)\n    }).then(res => console.log(res.data)).catch(err => console.log(err.response.data));\n  } // componentDidMount(){\n  //   axios.defaults.baseURL='http://localhost:5000/api/auth'\n  //   axios.interceptors.request.use(\n  //     config => {\n  //         const token = localStorage.getItem(\"token\");\n  //         if (token) {\n  //             config.headers['Authorization'] = 'Bearer ' + token;\n  //         }\n  //         // config.headers['Content-Type'] = 'application/json';\n  //         return config;\n  //     },\n  //     error => {\n  //         Promise.reject(error)\n  //     });\n  // }\n\n\n  render() {\n    {\n      if (this.state.toDashboard === true) {\n        return React.createElement(Redirect, {\n          to: \"/acceuil\",\n          __source: {\n            fileName: _jsxFileName,\n            lineNumber: 111\n          },\n          __self: this\n        });\n      }\n\n      return React.createElement(\"div\", {\n        className: \"home\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 115\n        },\n        __self: this\n      }, React.createElement(\"div\", {\n        className: \"falcontitle\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 117\n        },\n        __self: this\n      }, React.createElement(\"h1\", {\n        className: \"falcon\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 119\n        },\n        __self: this\n      }, \"Falcon\"), React.createElement(\"h5\", {\n        className: \"ressources\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 120\n        },\n        __self: this\n      }, \"inspection & services\")), React.createElement(\"div\", {\n        className: \"falconlogin\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 122\n        },\n        __self: this\n      }, React.createElement(\"form\", {\n        method: \"post\",\n        className: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 123\n        },\n        __self: this\n      }, React.createElement(\"h2\", {\n        className: \"ressources\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 124\n        },\n        __self: this\n      }, \"Login\"), React.createElement(\"input\", {\n        className: \"editInput\",\n        name: \"username\",\n        placeholder: \"Username\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 126\n        },\n        __self: this\n      }), React.createElement(\"input\", {\n        className: \"editInput\",\n        type: \"password\",\n        name: \"password\",\n        placeholder: \"Password\",\n        onChange: this.handleChange,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 127\n        },\n        __self: this\n      }), React.createElement(\"button\", {\n        className: \"homeButtonG\",\n        type: \"button\",\n        onClick: this.login,\n        value: \"login\",\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 130\n        },\n        __self: this\n      }, \"Log In\"))));\n    }\n  }\n\n}","map":{"version":3,"sources":["C:/Users/Y A C I N E/Desktop/Falcon ress/src/Components/ConnectJWT.js"],"names":["React","Component","axios","Redirect","Link","Navbar","jwt_decode","ConnectJWT","constructor","props","handleChange","e","setState","target","name","value","login","state","username","password","post","then","res","console","log","localStorage","setItem","data","token","toDashboard","catch","err","alert","mode","componentDidMount","webApiUrl","tokenStr","getItem","configtoken","get","headers","defaults","common","access_token","response","render"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nimport axios from \"axios\";\r\nimport {Redirect, Link} from 'react-router-dom'\r\nimport \"../App.css\"\r\nimport { Navbar } from 'reactstrap';\r\nimport jwt_decode from \"jwt-decode\";\r\n\r\n\r\n\r\n\r\nexport default class ConnectJWT extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n    \r\n        this.state = {\r\n             username:\"\",\r\n             password:\"\",\r\n             toDashboard: false,\r\n            mode:\"non\"\r\n        }\r\n    }\r\n\r\n    handleChange = e => {\r\n        this.setState({ [e.target.name]: e.target.value });\r\n      };\r\n\r\n      login = () => {\r\n        const { username, password } = this.state;\r\n        axios\r\n          .post(\"http://localhost:5000/login\", { username, password })\r\n          .then(res => {\r\n            \r\n            console.log(res);\r\n            localStorage.setItem(\"token\", res.data.token);\r\n            this.setState({toDashboard:true})\r\n            \r\n          })\r\n          \r\n          .catch(err => alert('user not found'));\r\n      };\r\n\r\n    //   currentuser = () =>{\r\n    //     if (localStorage.getItem(\"token\")) {\r\n    //       const token = localStorage.getItem(\"token\");\r\n    //       var decoded = jwt_decode(token);\r\n    //       console.log(decoded);\r\n    //      axios.get('http://localhost:5000/users'+decoded._id)\r\n    //     .then(res => console.log(res.data))\r\n    // .catch(err => console.log(err.response.data));\r\n    //   }}\r\n\r\n      // configtoken = () => {\r\n      //   if (localStorage.getItem(\"token\")) {\r\n      //    const token = localStorage.getItem(\"token\");\r\n      \r\n    \r\n      // axios.defaults.baseURL='http://localhost:5000/'\r\n      //   axios.interceptors.request.use(\r\n      //     config => {\r\n      //         if (token) {\r\n      //             config.headers['Authorization'] = 'Bearer ' + token;\r\n      //         }\r\n      //         // config.headers['Content-Type'] = 'application/json';\r\n      //         return config;\r\n      //     },\r\n      //     error => {\r\n      //         Promise.reject(error)\r\n      //     });\r\n      //   };\r\n    \r\n    \r\n    \r\n    \r\n    \r\n    \r\n\r\n\r\n\r\ncomponentDidMount() {\r\n  let webApiUrl = 'http://localhost:5000/';\r\nlet tokenStr = localStorage.getItem(\"token\");\r\n  console.log(this.configtoken());\r\n  axios\r\n    .get(webApiUrl, { headers: axios.defaults.headers.common['Authorization'] = `Bearer ${access_token}`  })\r\n    .then(res => console.log(res.data))\r\n    .catch(err => console.log(err.response.data));\r\n}\r\n\r\n// componentDidMount(){\r\n//   axios.defaults.baseURL='http://localhost:5000/api/auth'\r\n//   axios.interceptors.request.use(\r\n//     config => {\r\n//         const token = localStorage.getItem(\"token\");\r\n//         if (token) {\r\n//             config.headers['Authorization'] = 'Bearer ' + token;\r\n//         }\r\n//         // config.headers['Content-Type'] = 'application/json';\r\n//         return config;\r\n//     },\r\n//     error => {\r\n//         Promise.reject(error)\r\n//     });\r\n// }\r\n\r\n\r\n\r\n    render() {\r\n      \r\n      {\r\n        if (this.state.toDashboard === true) {\r\n          return <Redirect to='/acceuil' />\r\n        }\r\n        return (\r\n          \r\n          <div className=\"home\">\r\n            \r\n            <div className=\"falcontitle\">\r\n           \r\n                    <h1 className=\"falcon\">Falcon</h1>\r\n                    <h5 className=\"ressources\">inspection & services</h5></div>\r\n                   \r\n                    <div className=\"falconlogin\">\r\n        <form method=\"post\"className=\"login\">\r\n            <h2 className=\"ressources\">Login</h2>\r\n            \r\n            <input className=\"editInput\" name=\"username\" placeholder=\"Username\" onChange={this.handleChange}/>\r\n            <input className=\"editInput\" type=\"password\" name=\"password\" placeholder=\"Password\" onChange={this.handleChange} />\r\n          \r\n          \r\n           <button className=\"homeButtonG\" type=\"button\"onClick={this.login} value=\"login\">Log In</button>\r\n           \r\n           </form></div>\r\n    \r\n               \r\n                    \r\n\r\n                    \r\n</div>\r\n           \r\n        )\r\n          }\r\n        }}\r\n"]},"metadata":{},"sourceType":"module"}